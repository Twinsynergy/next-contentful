{"ast":null,"code":"// set client\nconst client = require(\"contentful\").createClient({\n  space: process.env.REACT_APP_CONTENTFUL_SPACE_ID,\n  accessToken: process.env.REACT_APP_CONTENTFUL_ACCESS_TOKEN\n}); // get all posts\n\n\nexport async function getAllPosts() {\n  const entries = await client.getEntries({\n    content_type: \"blogPost\",\n    order: \"-fields.publishDate\"\n  });\n\n  if (entries.items) {\n    return entries.items;\n  }\n\n  console.log(`Error getting Entries for ${contentType.name}.`);\n} // get posts by category\n\nexport async function getPostsByCategory(slug) {\n  const entries = await client.getEntries({\n    content_type: \"blogPost\",\n    \"fields.category\": slug,\n    order: \"-fields.publishDate\"\n  }); // const host = slug.split(\"/\")\n  // const cate = host.pop().replace('#','')\n\n  if (entries.items) {\n    // return entries.items.filter(post => post.fields.category.fields.name(categoria => categoria.name === cate));\n    return entries.items;\n  }\n\n  console.log(`Error getting Entries for ${contentType.name}.`);\n} // get a post by slug\n\nexport async function getPostBySlug(slug) {\n  const entries = await client.getEntries({\n    content_type: \"blogPost\",\n    limit: 1,\n    \"fields.slug\": slug\n  });\n\n  if (entries.items) {\n    return entries.items[0];\n  }\n\n  console.log(`Error getting Entries for ${contentType.name}.`);\n} // get more 3 latest posts\n\nexport async function getMorePosts(slug) {\n  const entries = await client.getEntries({\n    content_type: \"blogPost\",\n    limit: 3,\n    order: \"-fields.publishDate\",\n    \"fields.slug[nin]\": slug\n  });\n\n  if (entries.items) {\n    return entries.items;\n  }\n\n  console.log(`Error getting Entries for ${contentType.name}.`);\n}\n\nfunction parsePostSlug({\n  fields\n}) {\n  return {\n    slug: fields.slug\n  };\n}\n\nfunction parsePostSlugEntries(entries, cb = parsePostSlug) {\n  var _entries$items;\n\n  return entries === null || entries === void 0 ? void 0 : (_entries$items = entries.items) === null || _entries$items === void 0 ? void 0 : _entries$items.map(cb);\n} // get all slugs of posts\n\n\nexport async function getAllPostsWithSlug() {\n  const entries = await client.getEntries({\n    content_type: \"blogPost\",\n    select: \"fields.slug\"\n  });\n  return parsePostSlugEntries(entries, post => post.fields);\n}","map":null,"metadata":{},"sourceType":"module"}